{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { UserFormComponent } from './user-form.component';\nimport { of, switchMap } from 'rxjs';\nlet UserEditComponent = class UserEditComponent {\n  constructor(route, userService, router) {\n    this.route = route;\n    this.userService = userService;\n    this.router = router;\n    this.toastMessage = null;\n    this.availableRoles$ = this.userService.getAvailableRoles();\n    this.user$ = this.route.paramMap.pipe(switchMap(params => {\n      const id = params.get('id');\n      if (!id) return of(null);\n      return this.userService.getAll().pipe(switchMap(users => of(users.find(u => u.id === id) || null)));\n    }));\n  }\n  onSubmit(formValue, user) {\n    const updatedUser = {\n      ...user,\n      ...formValue,\n      updatedAt: new Date()\n    };\n    this.userService.update(user.id, updatedUser).subscribe({\n      next: () => {\n        this.showToast('User updated successfully!');\n        setTimeout(() => this.router.navigate(['../../'], {\n          relativeTo: this.route\n        }), 1200);\n      },\n      error: () => {\n        this.showToast('Failed to update user.', true);\n      }\n    });\n  }\n  onCancel() {\n    this.router.navigate(['../../'], {\n      relativeTo: this.route\n    });\n  }\n  showToast(message, error = false) {\n    this.toastMessage = message;\n    if (error) {\n      this.toastMessage += '';\n    }\n    clearTimeout(this.toastTimeout);\n    this.toastTimeout = setTimeout(() => {\n      this.toastMessage = null;\n    }, 2000);\n  }\n};\nUserEditComponent = __decorate([Component({\n  selector: 'app-user-edit',\n  standalone: true,\n  imports: [CommonModule, UserFormComponent],\n  templateUrl: './user-edit.component.html',\n  styleUrls: ['./user-edit.component.scss']\n})], UserEditComponent);\nexport { UserEditComponent };","map":{"version":3,"names":["Component","CommonModule","UserFormComponent","of","switchMap","UserEditComponent","constructor","route","userService","router","toastMessage","availableRoles$","getAvailableRoles","user$","paramMap","pipe","params","id","get","getAll","users","find","u","onSubmit","formValue","user","updatedUser","updatedAt","Date","update","subscribe","next","showToast","setTimeout","navigate","relativeTo","error","onCancel","message","clearTimeout","toastTimeout","__decorate","selector","standalone","imports","templateUrl","styleUrls"],"sources":["C:\\Users\\ibrahim\\Desktop\\projectPort-new\\src\\app\\features\\users\\user-edit.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { UserService } from '../../core/services/user.service';\r\nimport { UserFormComponent } from './user-form.component';\r\nimport { Observable, of, switchMap } from 'rxjs';\r\nimport { User } from '../../core/models/user.model';\r\n\r\n@Component({\r\n  selector: 'app-user-edit',\r\n  standalone: true,\r\n  imports: [CommonModule, UserFormComponent],\r\n  templateUrl: './user-edit.component.html',\r\n  styleUrls: ['./user-edit.component.scss']\r\n})\r\nexport class UserEditComponent {\r\n  user$: Observable<User | null>;\r\n  availableRoles$: Observable<string[]>;\r\n  toastMessage: string | null = null;\r\n  toastTimeout: any;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private userService: UserService,\r\n    private router: Router\r\n  ) {\r\n    this.availableRoles$ = this.userService.getAvailableRoles();\r\n    this.user$ = this.route.paramMap.pipe(\r\n      switchMap(params => {\r\n        const id = params.get('id');\r\n        if (!id) return of(null);\r\n        return this.userService.getAll().pipe(\r\n          switchMap(users => of(users.find(u => u.id === id) || null))\r\n        );\r\n      })\r\n    );\r\n  }\r\n\r\n  onSubmit(formValue: any, user: User) {\r\n    const updatedUser = { ...user, ...formValue, updatedAt: new Date() };\r\n    this.userService.update(user.id, updatedUser).subscribe({\r\n      next: () => {\r\n        this.showToast('User updated successfully!');\r\n        setTimeout(() => this.router.navigate(['../../'], { relativeTo: this.route }), 1200);\r\n      },\r\n      error: () => {\r\n        this.showToast('Failed to update user.', true);\r\n      }\r\n    });\r\n  }\r\n\r\n  onCancel() {\r\n    this.router.navigate(['../../'], { relativeTo: this.route });\r\n  }\r\n\r\n  showToast(message: string, error = false) {\r\n    this.toastMessage = message;\r\n    if (error) {\r\n      this.toastMessage += '';\r\n    }\r\n    clearTimeout(this.toastTimeout);\r\n    this.toastTimeout = setTimeout(() => {\r\n      this.toastMessage = null;\r\n    }, 2000);\r\n  }\r\n} "],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAASC,YAAY,QAAQ,iBAAiB;AAG9C,SAASC,iBAAiB,QAAQ,uBAAuB;AACzD,SAAqBC,EAAE,EAAEC,SAAS,QAAQ,MAAM;AAUzC,IAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAM5BC,YACUC,KAAqB,EACrBC,WAAwB,EACxBC,MAAc;IAFd,KAAAF,KAAK,GAALA,KAAK;IACL,KAAAC,WAAW,GAAXA,WAAW;IACX,KAAAC,MAAM,GAANA,MAAM;IANhB,KAAAC,YAAY,GAAkB,IAAI;IAQhC,IAAI,CAACC,eAAe,GAAG,IAAI,CAACH,WAAW,CAACI,iBAAiB,EAAE;IAC3D,IAAI,CAACC,KAAK,GAAG,IAAI,CAACN,KAAK,CAACO,QAAQ,CAACC,IAAI,CACnCX,SAAS,CAACY,MAAM,IAAG;MACjB,MAAMC,EAAE,GAAGD,MAAM,CAACE,GAAG,CAAC,IAAI,CAAC;MAC3B,IAAI,CAACD,EAAE,EAAE,OAAOd,EAAE,CAAC,IAAI,CAAC;MACxB,OAAO,IAAI,CAACK,WAAW,CAACW,MAAM,EAAE,CAACJ,IAAI,CACnCX,SAAS,CAACgB,KAAK,IAAIjB,EAAE,CAACiB,KAAK,CAACC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACL,EAAE,KAAKA,EAAE,CAAC,IAAI,IAAI,CAAC,CAAC,CAC7D;IACH,CAAC,CAAC,CACH;EACH;EAEAM,QAAQA,CAACC,SAAc,EAAEC,IAAU;IACjC,MAAMC,WAAW,GAAG;MAAE,GAAGD,IAAI;MAAE,GAAGD,SAAS;MAAEG,SAAS,EAAE,IAAIC,IAAI;IAAE,CAAE;IACpE,IAAI,CAACpB,WAAW,CAACqB,MAAM,CAACJ,IAAI,CAACR,EAAE,EAAES,WAAW,CAAC,CAACI,SAAS,CAAC;MACtDC,IAAI,EAAEA,CAAA,KAAK;QACT,IAAI,CAACC,SAAS,CAAC,4BAA4B,CAAC;QAC5CC,UAAU,CAAC,MAAM,IAAI,CAACxB,MAAM,CAACyB,QAAQ,CAAC,CAAC,QAAQ,CAAC,EAAE;UAAEC,UAAU,EAAE,IAAI,CAAC5B;QAAK,CAAE,CAAC,EAAE,IAAI,CAAC;MACtF,CAAC;MACD6B,KAAK,EAAEA,CAAA,KAAK;QACV,IAAI,CAACJ,SAAS,CAAC,wBAAwB,EAAE,IAAI,CAAC;MAChD;KACD,CAAC;EACJ;EAEAK,QAAQA,CAAA;IACN,IAAI,CAAC5B,MAAM,CAACyB,QAAQ,CAAC,CAAC,QAAQ,CAAC,EAAE;MAAEC,UAAU,EAAE,IAAI,CAAC5B;IAAK,CAAE,CAAC;EAC9D;EAEAyB,SAASA,CAACM,OAAe,EAAEF,KAAK,GAAG,KAAK;IACtC,IAAI,CAAC1B,YAAY,GAAG4B,OAAO;IAC3B,IAAIF,KAAK,EAAE;MACT,IAAI,CAAC1B,YAAY,IAAI,EAAE;IACzB;IACA6B,YAAY,CAAC,IAAI,CAACC,YAAY,CAAC;IAC/B,IAAI,CAACA,YAAY,GAAGP,UAAU,CAAC,MAAK;MAClC,IAAI,CAACvB,YAAY,GAAG,IAAI;IAC1B,CAAC,EAAE,IAAI,CAAC;EACV;CACD;AAlDYL,iBAAiB,GAAAoC,UAAA,EAP7BzC,SAAS,CAAC;EACT0C,QAAQ,EAAE,eAAe;EACzBC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CAAC3C,YAAY,EAAEC,iBAAiB,CAAC;EAC1C2C,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,4BAA4B;CACzC,CAAC,C,EACWzC,iBAAiB,CAkD7B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}