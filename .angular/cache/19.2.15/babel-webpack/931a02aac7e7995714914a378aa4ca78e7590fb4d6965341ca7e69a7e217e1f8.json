{"ast":null,"code":"import { of } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { BaseService } from './base.service';\nimport * as i0 from \"@angular/core\";\nexport class UserService extends BaseService {\n  getInitialData() {\n    return [{\n      id: '1',\n      name: 'Alice Smith',\n      email: 'alice@example.com',\n      password: 'password',\n      image: '',\n      roles: ['admin'],\n      isActive: true,\n      createdAt: new Date('2023-01-01'),\n      updatedAt: new Date('2023-01-01')\n    }, {\n      id: '2',\n      name: 'Bob Johnson',\n      email: 'bob@example.com',\n      password: 'password',\n      image: '',\n      roles: ['editor'],\n      isActive: true,\n      createdAt: new Date('2023-01-02'),\n      updatedAt: new Date('2023-01-02')\n    }, {\n      id: '3',\n      name: 'Carol Lee',\n      email: 'carol@example.com',\n      password: 'password',\n      image: '',\n      roles: ['author'],\n      isActive: false,\n      createdAt: new Date('2023-01-03'),\n      updatedAt: new Date('2023-01-03')\n    }, {\n      id: '4',\n      name: 'David Kim',\n      email: 'david.kim@cluster2airports.com',\n      avatar: 'https://images.pexels.com/photos/3785079/pexels-photo-3785079.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2',\n      createdAt: new Date('2024-04-05'),\n      isActive: true\n    }, {\n      id: '5',\n      name: 'Emma Thompson',\n      email: 'emma.thompson@cluster2airports.com',\n      avatar: 'https://images.pexels.com/photos/3778876/pexels-photo-3778876.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2',\n      createdAt: new Date('2024-05-12'),\n      isActive: true\n    }, {\n      id: '6',\n      name: 'Robert Wilson',\n      email: 'robert.wilson@cluster2airports.com',\n      avatar: 'https://images.pexels.com/photos/3760263/pexels-photo-3760263.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2',\n      createdAt: new Date('2024-06-18'),\n      isActive: false\n    }];\n  }\n  generateId() {\n    return Math.random().toString(36).substr(2, 9);\n  }\n  getFiltered(filter) {\n    return this.getAll().pipe(map(users => {\n      let filtered = users;\n      if (filter.searchTerm) {\n        const searchLower = filter.searchTerm.toLowerCase();\n        filtered = filtered.filter(user => user.name.toLowerCase().includes(searchLower) || user.email.toLowerCase().includes(searchLower));\n      }\n      if (filter.role) {\n        filtered = filtered.filter(user => user.roles && Array.isArray(user.roles) && filter.role && user.roles.includes(filter.role));\n      }\n      if (filter.isActive !== undefined) {\n        filtered = filtered.filter(user => user.isActive === filter.isActive);\n      }\n      return filtered.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n    }));\n  }\n  getActiveUsersCount() {\n    return this.getAll().pipe(map(users => users.filter(user => user.isActive).length));\n  }\n  getAdminCount() {\n    return this.getAll().pipe(map(users => users.filter(user => user.roles.includes('admin')).length));\n  }\n  getInactiveCount() {\n    return this.getAll().pipe(map(users => users.filter(user => !user.isActive).length));\n  }\n  toggleUserStatus(id) {\n    return this.getById(id).pipe(switchMap(user => {\n      if (!user) return [null];\n      return this.update(id, {\n        isActive: !user.isActive\n      });\n    }));\n  }\n  // Observable for loading state\n  get isLoading$() {\n    return this.isLoading();\n  }\n  createUser(user) {\n    const newUser = {\n      ...user,\n      id: this.generateId(),\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      isActive: true\n    };\n    const currentUsers = this.items$.getValue();\n    this.items$.next([...currentUsers, newUser]);\n    return of(newUser);\n  }\n  getAvailableRoles() {\n    // You can make this dynamic if needed\n    return of(['admin', 'editor', 'author', 'viewer']);\n  }\n  static {\n    this.ɵfac = /*@__PURE__*/(() => {\n      let ɵUserService_BaseFactory;\n      return function UserService_Factory(__ngFactoryType__) {\n        return (ɵUserService_BaseFactory || (ɵUserService_BaseFactory = i0.ɵɵgetInheritedFactory(UserService)))(__ngFactoryType__ || UserService);\n      };\n    })();\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: UserService,\n      factory: UserService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["of","map","switchMap","BaseService","UserService","getInitialData","id","name","email","password","image","roles","isActive","createdAt","Date","updatedAt","avatar","generateId","Math","random","toString","substr","getFiltered","filter","getAll","pipe","users","filtered","searchTerm","searchLower","toLowerCase","user","includes","role","Array","isArray","undefined","sort","a","b","getTime","getActiveUsersCount","length","getAdminCount","getInactiveCount","toggleUserStatus","getById","update","isLoading$","isLoading","createUser","newUser","currentUsers","items$","getValue","next","getAvailableRoles","__ngFactoryType__","factory","ɵfac","providedIn"],"sources":["C:\\Users\\ibrahim\\Desktop\\projectPort-new\\src\\app\\core\\services\\user.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { BaseService } from './base.service';\nimport { User, UserFilter } from '../models/user.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService extends BaseService<User> {\n  \n  protected getInitialData(): User[] {\n    return [\n      {\n        id: '1',\n        name: 'Alice Smith',\n        email: 'alice@example.com',\n        password: 'password',\n        image: '',\n        roles: ['admin'],\n        isActive: true,\n        createdAt: new Date('2023-01-01'),\n        updatedAt: new Date('2023-01-01')\n      },\n      {\n        id: '2',\n        name: 'Bob Johnson',\n        email: 'bob@example.com',\n        password: 'password',\n        image: '',\n        roles: ['editor'],\n        isActive: true,\n        createdAt: new Date('2023-01-02'),\n        updatedAt: new Date('2023-01-02')\n      },\n      {\n        id: '3',\n        name: 'Carol Lee',\n        email: 'carol@example.com',\n        password: 'password',\n        image: '',\n        roles: ['author'],\n        isActive: false,\n        createdAt: new Date('2023-01-03'),\n        updatedAt: new Date('2023-01-03')\n      },\n      {\n        id: '4',\n        name: 'David Kim',\n        email: 'david.kim@cluster2airports.com',\n        avatar: 'https://images.pexels.com/photos/3785079/pexels-photo-3785079.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2',\n        createdAt: new Date('2024-04-05'),\n        isActive: true\n      },\n      {\n        id: '5',\n        name: 'Emma Thompson',\n        email: 'emma.thompson@cluster2airports.com',\n        avatar: 'https://images.pexels.com/photos/3778876/pexels-photo-3778876.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2',\n        createdAt: new Date('2024-05-12'),\n        isActive: true\n      },\n      {\n        id: '6',\n        name: 'Robert Wilson',\n        email: 'robert.wilson@cluster2airports.com',\n        avatar: 'https://images.pexels.com/photos/3760263/pexels-photo-3760263.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2',\n        createdAt: new Date('2024-06-18'),\n        isActive: false\n      }\n    ];\n  }\n\n  protected generateId(): string {\n    return Math.random().toString(36).substr(2, 9);\n  }\n\n  getFiltered(filter: UserFilter): Observable<User[]> {\n    return this.getAll().pipe(\n      map(users => {\n        let filtered = users;\n\n        if (filter.searchTerm) {\n          const searchLower = filter.searchTerm.toLowerCase();\n          filtered = filtered.filter(user => \n            user.name.toLowerCase().includes(searchLower) ||\n            user.email.toLowerCase().includes(searchLower)\n          );\n        }\n\n        if (filter.role) {\n          filtered = filtered.filter(user => user.roles && Array.isArray(user.roles) && filter.role && user.roles.includes(filter.role));\n        }\n\n        if (filter.isActive !== undefined) {\n          filtered = filtered.filter(user => user.isActive === filter.isActive);\n        }\n\n        return filtered.sort((a, b) => \n          new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n        );\n      })\n    );\n  }\n\n  getActiveUsersCount(): Observable<number> {\n    return this.getAll().pipe(\n      map(users => users.filter(user => user.isActive).length)\n    );\n  }\n\n  getAdminCount(): Observable<number> {\n    return this.getAll().pipe(\n      map(users => users.filter(user => user.roles.includes('admin')).length)\n    );\n  }\n\n  getInactiveCount(): Observable<number> {\n    return this.getAll().pipe(\n      map(users => users.filter(user => !user.isActive).length)\n    );\n  }\n\n  toggleUserStatus(id: string): Observable<User | null> {\n    return this.getById(id).pipe(\n      switchMap(user => {\n        if (!user) return [null];\n        return this.update(id, { isActive: !user.isActive });\n      })\n    );\n  }\n\n  // Observable for loading state\n  get isLoading$(): Observable<boolean> {\n    return this.isLoading();\n  }\n\n  createUser(user: Omit<User, 'id' | 'createdAt' | 'updatedAt'>): Observable<User> {\n    const newUser: User = {\n      ...user,\n      id: this.generateId(),\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      isActive: true\n    };\n    const currentUsers = this.items$.getValue();\n    this.items$.next([...currentUsers, newUser]);\n    return of(newUser);\n  }\n\n  getAvailableRoles(): Observable<string[]> {\n    // You can make this dynamic if needed\n    return of(['admin', 'editor', 'author', 'viewer']);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}