{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { UserFormComponent } from './user-form.component';\nimport { of, switchMap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../core/services/user.service\";\nimport * as i3 from \"@angular/common\";\nfunction UserEditComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"h5\", 4);\n    i0.ɵɵelement(3, \"i\", 5);\n    i0.ɵɵtext(4, \" Edit User\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 6)(6, \"app-user-form\", 7);\n    i0.ɵɵlistener(\"submitUser\", function UserEditComponent_div_0_Template_app_user_form_submitUser_6_listener($event) {\n      const user_r2 = i0.ɵɵrestoreView(_r1).ngIf;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onSubmit($event, user_r2));\n    })(\"cancel\", function UserEditComponent_div_0_Template_app_user_form_cancel_6_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onCancel());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const user_r2 = ctx.ngIf;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"user\", user_r2)(\"mode\", \"edit\")(\"availableRoles$\", ctx_r2.availableRoles$);\n  }\n}\nfunction UserEditComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"div\", 9);\n    i0.ɵɵelementStart(2, \"div\", 10);\n    i0.ɵɵtext(3, \"Loading user...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class UserEditComponent {\n  constructor(route, userService, router) {\n    this.route = route;\n    this.userService = userService;\n    this.router = router;\n    this.availableRoles$ = this.userService.getAvailableRoles();\n    this.user$ = this.route.paramMap.pipe(switchMap(params => {\n      const id = params.get('id');\n      if (!id) return of(null);\n      return this.userService.getAll().pipe(switchMap(users => of(users.find(u => u.id === id) || null)));\n    }));\n  }\n  onSubmit(formValue, user) {\n    const updatedUser = {\n      ...user,\n      ...formValue,\n      updatedAt: new Date()\n    };\n    this.userService.update(user.id, updatedUser).subscribe(() => {\n      this.router.navigate(['../../'], {\n        relativeTo: this.route\n      });\n    });\n  }\n  onCancel() {\n    this.router.navigate(['../../'], {\n      relativeTo: this.route\n    });\n  }\n  static {\n    this.ɵfac = function UserEditComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || UserEditComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i1.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UserEditComponent,\n      selectors: [[\"app-user-edit\"]],\n      decls: 4,\n      vars: 4,\n      consts: [[\"loading\", \"\"], [\"class\", \"card mb-4\", 4, \"ngIf\", \"ngIfElse\"], [1, \"card\", \"mb-4\"], [1, \"card-header\"], [1, \"mb-0\"], [1, \"fas\", \"fa-user-edit\", \"me-2\"], [1, \"card-body\"], [3, \"submitUser\", \"cancel\", \"user\", \"mode\", \"availableRoles$\"], [1, \"text-center\", \"py-5\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"mt-2\"]],\n      template: function UserEditComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, UserEditComponent_div_0_Template, 7, 3, \"div\", 1);\n          i0.ɵɵpipe(1, \"async\");\n          i0.ɵɵtemplate(2, UserEditComponent_ng_template_2_Template, 4, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n        }\n        if (rf & 2) {\n          const loading_r4 = i0.ɵɵreference(3);\n          i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 2, ctx.user$))(\"ngIfElse\", loading_r4);\n        }\n      },\n      dependencies: [CommonModule, i3.NgIf, i3.AsyncPipe, UserFormComponent],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","UserFormComponent","of","switchMap","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","UserEditComponent_div_0_Template_app_user_form_submitUser_6_listener","$event","user_r2","ɵɵrestoreView","_r1","ngIf","ctx_r2","ɵɵnextContext","ɵɵresetView","onSubmit","UserEditComponent_div_0_Template_app_user_form_cancel_6_listener","onCancel","ɵɵadvance","ɵɵproperty","availableRoles$","UserEditComponent","constructor","route","userService","router","getAvailableRoles","user$","paramMap","pipe","params","id","get","getAll","users","find","u","formValue","user","updatedUser","updatedAt","Date","update","subscribe","navigate","relativeTo","ɵɵdirectiveInject","i1","ActivatedRoute","i2","UserService","Router","selectors","decls","vars","consts","template","UserEditComponent_Template","rf","ctx","ɵɵtemplate","UserEditComponent_div_0_Template","UserEditComponent_ng_template_2_Template","ɵɵtemplateRefExtractor","ɵɵpipeBind1","loading_r4","i3","NgIf","AsyncPipe","encapsulation"],"sources":["C:\\Users\\ibrahim\\Desktop\\projectPort-new\\src\\app\\features\\users\\user-edit.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { UserService } from '../../core/services/user.service';\r\nimport { UserFormComponent } from './user-form.component';\r\nimport { Observable, of, switchMap } from 'rxjs';\r\nimport { User } from '../../core/models/user.model';\r\n\r\n@Component({\r\n  selector: 'app-user-edit',\r\n  standalone: true,\r\n  imports: [CommonModule, UserFormComponent],\r\n  template: `\r\n    <div class=\"card mb-4\" *ngIf=\"user$ | async as user; else loading\">\r\n      <div class=\"card-header\">\r\n        <h5 class=\"mb-0\"><i class=\"fas fa-user-edit me-2\"></i> Edit User</h5>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <app-user-form\r\n          [user]=\"user\"\r\n          [mode]=\"'edit'\"\r\n          [availableRoles$]=\"availableRoles$\"\r\n          (submitUser)=\"onSubmit($event, user)\"\r\n          (cancel)=\"onCancel()\"\r\n        ></app-user-form>\r\n      </div>\r\n    </div>\r\n    <ng-template #loading>\r\n      <div class=\"text-center py-5\">\r\n        <div class=\"spinner-border text-primary\" role=\"status\"></div>\r\n        <div class=\"mt-2\">Loading user...</div>\r\n      </div>\r\n    </ng-template>\r\n  `\r\n})\r\nexport class UserEditComponent {\r\n  user$: Observable<User | null>;\r\n  availableRoles$: Observable<string[]>;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private userService: UserService,\r\n    private router: Router\r\n  ) {\r\n    this.availableRoles$ = this.userService.getAvailableRoles();\r\n    this.user$ = this.route.paramMap.pipe(\r\n      switchMap(params => {\r\n        const id = params.get('id');\r\n        if (!id) return of(null);\r\n        return this.userService.getAll().pipe(\r\n          switchMap(users => of(users.find(u => u.id === id) || null))\r\n        );\r\n      })\r\n    );\r\n  }\r\n\r\n  onSubmit(formValue: any, user: User) {\r\n    const updatedUser = { ...user, ...formValue, updatedAt: new Date() };\r\n    this.userService.update(user.id, updatedUser).subscribe(() => {\r\n      this.router.navigate(['../../'], { relativeTo: this.route });\r\n    });\r\n  }\r\n\r\n  onCancel() {\r\n    this.router.navigate(['../../'], { relativeTo: this.route });\r\n  }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}